/* Import design tokens and theme files */
@import '../styles/tokens.css';
@import '../styles/semantic.css';
@import '../styles/dark.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ========================================
   BASE STYLES
   ======================================== */

@layer base {
  * {
    @apply border-border;
  }

  html {
    @apply antialiased;
    font-feature-settings: 'liga' 1, 'calt' 1;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    font-size: var(--text-body-16-size);
    line-height: var(--text-body-16-line);
  }

  /* Typography base */
  h1 {
    font-size: var(--text-h1-size);
    line-height: var(--text-h1-line);
    font-weight: var(--text-h1-weight);
  }

  h2 {
    font-size: var(--text-h2-size);
    line-height: var(--text-h2-line);
    font-weight: var(--text-h2-weight);
  }

  h3 {
    font-size: var(--text-h3-size);
    line-height: var(--text-h3-line);
    font-weight: var(--text-h3-weight);
  }

  /* Focus styles - visible and accessible */
  *:focus-visible {
    outline: var(--size-focus-ring) solid var(--color-focus-ring);
    outline-offset: var(--offset-focus-ring);
    border-radius: var(--radius-sm);
  }

  /* Remove default button focus for keyboard users (we use :focus-visible) */
  button:focus:not(:focus-visible) {
    outline: none;
  }
}

/* ========================================
   UTILITY CLASSES
   ======================================== */

@layer utilities {
  /* Text truncation with ellipsis */
  .truncate-ellipsis {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }

  /* Accessible screen reader only content */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Skeleton loading state */
  .skeleton {
    @apply animate-pulse bg-neutral-200 dark:bg-neutral-700;
  }

  /* Table density utilities */
  .table-dense {
    --table-row-height: var(--size-table-row-dense);
  }

  .table-comfortable {
    --table-row-height: var(--size-table-row-comfortable);
  }

  /* Focus ring utility */
  .focus-ring {
    @apply focus-visible:outline-none focus-visible:ring-[3px] focus-visible:ring-ring focus-visible:ring-offset-2;
  }

  /* Container max width */
  .container-max {
    max-width: var(--size-container-xl);
    margin-left: auto;
    margin-right: auto;
  }
}

/* ========================================
   COMPONENT PATTERNS
   ======================================== */

@layer components {
  /* Card component base */
  .card-base {
    background-color: var(--color-card-bg);
    border: 1px solid var(--color-card-border);
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-sm);
  }

  /* Panel component */
  .panel-base {
    background-color: var(--color-panel-bg);
    border: 1px solid var(--color-panel-border);
    border-radius: var(--radius-lg);
  }

  /* Status badge base */
  .badge-base {
    display: inline-flex;
    align-items: center;
    padding: 0.125rem 0.625rem;
    border-radius: var(--radius-full);
    font-size: var(--text-body-14-size);
    font-weight: 500;
    line-height: 1.5;
  }

  /* Diff highlight styles */
  .diff-added {
    background-color: var(--color-diff-added-bg);
    color: var(--color-diff-added-text);
    border-left: 3px solid var(--color-diff-added-border);
  }

  .diff-removed {
    background-color: var(--color-diff-removed-bg);
    color: var(--color-diff-removed-text);
    border-left: 3px solid var(--color-diff-removed-border);
  }

  .diff-changed {
    background-color: var(--color-diff-changed-bg);
    color: var(--color-diff-changed-text);
    border-left: 3px solid var(--color-diff-changed-border);
  }

  /* Table row states */
  .table-row-hover:hover {
    background-color: var(--color-table-row-hover);
  }

  .table-row-selected {
    background-color: var(--color-table-row-selected);
    border-left: 3px solid var(--color-table-row-selected-border);
  }

  /* Scrollbar styling (webkit browsers) */
  .custom-scrollbar::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  .custom-scrollbar::-webkit-scrollbar-track {
    background: var(--color-bg-muted);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: var(--color-border-default);
    border-radius: var(--radius-full);
  }

  .custom-scrollbar::-webkit-scrollbar-thumb:hover {
    background: var(--color-border-strong);
  }
}
